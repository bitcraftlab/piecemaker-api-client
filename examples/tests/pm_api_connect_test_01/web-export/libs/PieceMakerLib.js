var PieceMakerApi=function(){var f=void 0,j=void 0,c=void 0,g=function(){},l=function(a,b,d,h,f){j&&j.api_key&&(h&&!("api_key"in h)?h.api_key=j.api_key:h||(h={api_key:j.api_key}));jQuery.ajax({url:b,type:d,dataType:"json",data:h,context:a,success:f,error:function(b){c&&c.pmError&&c.pmError(b)},xhrFields:{withCredentials:!0}})},i=function(a,b){l(a,b.url,"get",null,b.success)},k=function(a,b){l(a,b.url,"post",b.data,b.success)},d=function(a){c=a.listener||{};j={api_key:a.api_key||!1};f=a.baseUrl||"http://localhost:3000"};
d.USER=0;d.PIECE=1;d.PIECES=2;d.EVENT=3;d.EVENTS=4;d.VIDEO=5;d.VIDEOS=6;d.prototype.loadPiece=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/piece/"+a,success:function(a){a.requestType=d.PIECE;e.call(b||c,a)}})};d.prototype.loadPieces=function(a){var b=a||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/pieces",success:function(e){e.requestType=d.PIECES;b.call(a||c,e)}})};d.prototype.loadEventsForPiece=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/piece/"+a+"/events",
success:function(a){a.requestType=d.EVENTS;e.call(b||c,a)}})};d.prototype.loadVideosForPiece=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/piece/"+a+"/videos",success:function(a){a.requestType=d.VIDEOS;e.call(b||c,a)}})};d.prototype.loadVideo=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/video/"+a,success:function(a){a.requestType=d.VIDEO;e.call(b||c,a)}})};d.prototype.loadEventsForVideo=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/video/"+
a+"/events",success:function(a){a.requestType=d.EVENTS;e.call(b||c,a)}})};d.prototype.loadEventsBetween=function(a,b,e){var h=e||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/events/between/"+parseInt(a.getTime()/1E3)+"/"+parseInt(Math.ceil(b.getTime()/1E3)),success:function(a){a.requestType=d.EVENTS;h.call(e||c,a)}})};d.prototype.loadEvent=function(a,b){var e=b||c&&c.pmDataAvailable||g;i(this,{url:f+"/api/event/"+a,success:function(a){a.requestType=d.EVENT;e.call(b||c,a)}})};d.prototype.createEvent=
function(a,b){var e=b||c&&c.pmDataAvailable||g;k(this,{url:f+"/api/event",data:a,success:function(a){a.requestType=d.EVENT;e.call(b||c,a)}})};d.prototype.saveEvent=function(a,b,e){var h=e||c&&c.pmDataAvailable||g;k(this,{url:f+"/api/event/"+a+"/update",data:b,success:function(a){a.requestType=d.EVENT;h.call(e||c,a)}})};d.prototype.deleteEvent=function(a,b){var e=b||c&&c.pmDataAvailable||g;"object"===typeof a&&"id"in a&&(a=a.id);k(this,{url:f+"/api/event/"+a+"/delete",success:function(a){a.requestType=
d.EVENT;e.call(b||c,a)}})};d.prototype.findEvents=function(a,b){var e=b||c&&c.pmDataAvailable||g;k(this,{url:f+"/api/events/find",data:a,success:function(a){a.requestType=d.EVENTS;e.call(b||c,a)}})};d.prototype.createCallback=function(a,b){console.log(a[b]);return a[b]};return d}();if(!("$"in this))var $={ajax:function(){}};